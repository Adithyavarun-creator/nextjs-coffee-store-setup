(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7555)}])},7555:function(e,n,a){"use strict";a.r(n),a.d(n,{__N_SSG:function(){return w},default:function(){return y}});var r=a(4051),t=a.n(r),o=a(5893),c=a(9008),i=a(5675),s=a(1206),l=a.n(s),d=function(e){return(0,o.jsxs)("div",{className:l().container,children:[(0,o.jsxs)("h1",{className:l().title,children:[(0,o.jsx)("span",{className:l().title1,children:"Coffee"}),(0,o.jsx)("span",{className:l().title2,children:"Connoisseur"})]}),(0,o.jsx)("p",{className:l().subTitle,children:"Discover your local coffee shops"}),(0,o.jsx)("div",{className:l().buttonWrapper,children:(0,o.jsx)("button",{className:l().button,onClick:e.handleOnClick,children:e.buttonText})})]})},u=a(1664),f=a(2472),_=a.n(f),h=a(4184),m=a.n(h),p=function(e){return(0,o.jsx)(u.default,{href:e.href,children:(0,o.jsx)("a",{className:_().cardLink,children:(0,o.jsxs)("div",{className:m()("glass",_().container),children:[(0,o.jsx)("div",{className:_().cardHeaderWrapper,children:(0,o.jsx)("h2",{className:_().cardHeader,children:e.name})}),(0,o.jsx)("div",{className:_().cardImageWrapper,children:(0,o.jsx)(i.default,{className:_().cardImage,src:e.imgUrl,width:260,height:160})})]})})})},x=a(214),g=a.n(x),b=(a(8090),a(7294)),j=a(960),v=function(){var e=(0,b.useState)(""),n=e[0],a=e[1],r=(0,b.useState)(!1),t=r[0],o=r[1],c=(0,b.useContext)(j.xf).dispatch,i=function(e){var n=e.coords.latitude,r=e.coords.longitude;c({type:j.Lp,payload:{latLong:"".concat(n,",").concat(r)}}),a(""),o(!1)},s=function(){o(!1),a("Unable to retrieve your location")};return{handleTrackLocation:function(){o(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(i,s):(a("Geolocation is not supported by your browser"),o(!1))},locationErrorMsg:n,isFindingLocation:t}};function N(e,n,a,r,t,o,c){try{var i=e[o](c),s=i.value}catch(l){return void a(l)}i.done?n(s):Promise.resolve(s).then(r,t)}var w=!0;function y(e){var n,a=v(),r=a.isFindingLocation,s=a.handleTrackLocation,l=a.locationErrorMsg,u=(0,b.useState)(null),f=(u[0],u[1]),_=(0,b.useContext)(j.xf),h=_.dispatch,m=_.state,x=m.coffeeStores,w=m.latLong;return(0,b.useEffect)((n=t().mark((function e(){var n,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=16;break}return e.prev=1,e.next=4,fetch("/api/getCoffeeStoresByLocation?latLong=".concat(w,"&limit=30"));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,h({type:j.oj,payload:{coffeeStores:a}}),f(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),f(e.t0.message),console.log(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var e=this,a=arguments;return new Promise((function(r,t){var o=n.apply(e,a);function c(e){N(o,r,t,c,i,"next",e)}function i(e){N(o,r,t,c,i,"throw",e)}c(void 0)}))}),[w]),(0,o.jsxs)("div",{className:g().container,children:[(0,o.jsxs)(c.default,{children:[(0,o.jsx)("title",{children:"Coffee Connoisseur"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)("main",{className:g().main,children:[(0,o.jsx)(d,{buttonText:r?"Loading...":"View stores nearby",handleOnClick:function(){console.log("Hi iam clicked"),s()}}),l&&(0,o.jsxs)("p",{children:["Something went wrong : ",l]}),(0,o.jsx)("div",{className:g().heroImage,children:(0,o.jsx)(i.default,{src:"/static/hero-image.png",width:700,height:400})}),x.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:g().heading2,children:"Search results by your location"}),(0,o.jsx)("div",{className:g().cardLayout,children:x.map((function(e){return(0,o.jsx)(p,{name:e.name,imgUrl:e.imgUrl||"https://images.unsplash.com/photo-1504753793650-d4a2b783c15e?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80",href:"/coffee-store/".concat(e.id),className:g().card},e.id)}))})]}),e.coffeeStores.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:g().heading2,children:"Torronto Stores"}),(0,o.jsx)("div",{className:g().cardLayout,children:e.coffeeStores.map((function(e){return(0,o.jsx)(p,{name:e.name,imgUrl:e.imgUrl||"https://images.unsplash.com/photo-1504753793650-d4a2b783c15e?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80",href:"/coffee-store/".concat(e.id),className:g().card},e.id)}))})]})]})]})}},1206:function(e){e.exports={container:"banner_container__dnbLV",title:"banner_title__PYWm4",title1:"banner_title1__ZXVyc",title2:"banner_title2__JqiuP",subTitle:"banner_subTitle__0Nyze",buttonWrapper:"banner_buttonWrapper__R1ZGV",button:"banner_button__e1xYN"}},2472:function(e){e.exports={cardLink:"card_cardLink___xt_C",container:"card_container__UHSnS",cardHeaderWrapper:"card_cardHeaderWrapper__mj_rt",cardHeader:"card_cardHeader__KpFux",cardImageWrapper:"card_cardImageWrapper__fA2sL",cardImage:"card_cardImage__x25Ih"}},214:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",heroImage:"Home_heroImage__K_jeP",cardLayout:"Home_cardLayout__5gqjA",card:"Home_card___LpL1",heading2:"Home_heading2__AYxqI",sectionWrapper:"Home_sectionWrapper___hbAJ"}},8090:function(e){"use strict";e.exports=[]}},function(e){e.O(0,[78,774,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);